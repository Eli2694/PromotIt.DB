--1 יצירת טבלת משתמשים רשומים לאתר
create  table Users(UserID int primary key identity,FullName varchar(50),
Email nvarchar(255))

drop table Users

--2 יצירת פונקציה שתבדוק אם המשתמש כבר קיים בטבלה
--3 אם כן לא נוסיף אותו, אם לא נוסיף אותו

alter procedure checkNewSiteUser @FullName varchar(50),@Email nvarchar(255)
as
begin
 if exists(select UserID from Users where Email=@Email)
 begin
  declare @answer varchar(100)
  select @answer = 'המשתמש נמצא , אין צורך לבצע פעולה נוספת'

 end
 else
 begin
 
	insert into Users values(@FullName,@Email)
 end
end

--הפעלה של הפונקציה 
-- exec checkNewSiteUser FullName,Email
--exec checkNewSiteUser 'test procedure','test@gmail.com','BusinessCompany',0
drop procedure checkNewSiteUser

--יצירת טבלה מחוברת בין עמותות לקמפיינים

alter procedure GetAllInfoAboutCampaigns
as
begin
select CampaignsID,AssociationName,AssociationWebsite,CampaginName
,CampaginHashtag,CampaginWebsite,DonationAmount
from Associations
inner join Campaigns 
on Associations.AssociationID = Campaigns.AssociationID
end

select * from [Order Confirmation]
